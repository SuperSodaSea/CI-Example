sudo: required
dist: trusty
language: cpp

matrix:
  include:
    - env: EVAL="CXX=g++-5" FLAGS="-m32" CONFIG=Debug
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5-multilib', 'lib32stdc++6']
    - env: EVAL="CXX=g++-5" FLAGS="-m32" CONFIG=Release
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5-multilib', 'lib32stdc++6']
    - env: EVAL="CXX=g++-5" FLAGS="-m64" CONFIG=Debug
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5']
    - env: EVAL="CXX=g++-5" FLAGS="-m64" CONFIG=Release
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5']
    - env: EVAL="CXX=clang++" FLAGS="-m32" CONFIG=Debug
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5-multilib', 'lib32stdc++6']
    - env: EVAL="CXX=clang++" FLAGS="-m32" CONFIG=Release
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['g++-5-multilib', 'lib32stdc++6']
    - env: EVAL="CXX=clang++" FLAGS="-m64" CONFIG=Debug
    - env: EVAL="CXX=clang++" FLAGS="-m64" CONFIG=Release

before_script:
- eval "${EVAL}"
- $CXX -v
- cmake -H. -Bbuild -DCMAKE_CXX_COMPILER=$CXX -DCMAKE_CXX_FLAGS=$FLAGS -DCMAKE_BUILD_TYPE=$CONFIG

script:
- make -C build

after_success:
- ./build/Main
